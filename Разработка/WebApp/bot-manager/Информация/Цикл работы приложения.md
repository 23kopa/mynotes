```
### üîÅ **–û–±—â–∏–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
```
üì¶ `–ë—Ä–∞—É–∑–µ—Ä (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)` ‚Üí `Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ` ‚Üí `–û–±—Ä–∞–±–æ—Ç–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∞` ‚Üí `–°–µ—Ä–≤–∏—Å` ‚Üí `HTML-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ (—Ä–µ–Ω–¥–µ—Ä)` ‚Üê `–û–±—Ä–∞—Ç–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä`
### 1. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
üìÑ `run.py`
```python
from app import create_app
app = create_app()  # —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```
üìÑ `app/__init__.py`
```python
def create_app():
    app = Flask(__name__)
    app.config.from_object(Config)  # –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
    db.init_app(app)
    login_manager.init_app(app)

    # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ (Blueprint'–æ–≤)
    app.register_blueprint(main_routes.bp)
    ...
    return app
```

### 2. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –¥–æ—Å—Ç—É–ø
üìÑ `app/__init__.py`
```python
@app.before_request
def require_login():
    if not current_user.is_authenticated:
        if –Ω–µ –≤—Ö–æ–¥–∏—Ç –≤ EXEMPT_PATHS:
            return redirect(url_for('auth_routes.login'))
```
### 3. –ú–∞—Ä—à—Ä—É—Ç—ã (—Ä–æ—É—Ç–∏–Ω–≥)
‚úÖ –ü—Ä–∏–º–µ—Ä: `default_routes.py`
üìÑ `app/routes/default_routes.py`
```python
@bp.route('/default')
@login_required
def default():
    cards = get_defaults_cards()
    return render_template('pages/default.html', ...)
```
üëÜ –≠—Ç–æ—Ç –º–∞—Ä—à—Ä—É—Ç:
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.
- –ü–æ–ª—É—á–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ —á–µ—Ä–µ–∑ **—Å–µ—Ä–≤–∏—Å**.
- –ü–µ—Ä–µ–¥–∞—ë—Ç –∏—Ö –≤ **—à–∞–±–ª–æ–Ω**.
### 4. –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π (–ª–æ–≥–∏–∫–∞)
üìÑ `app/services/default_cards_service.py`
```python
def get_defaults_cards():
    return [{...}, {...}]  # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç–æ—á–µ–∫
```
### 5. HTML-—à–∞–±–ª–æ–Ω—ã
#### 1. –°–µ—Ä–≤–∏—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
üìÑ `app/services/default_cards_service.py`
```python
# app/services/default_cards_service.py
def get_defaults_cards():
    return [ { 'type': 'text_info', 'title': '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è', ... } ]
```
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç–æ—á–µ–∫ (–¥–∞–Ω–Ω—ã–µ).
- –≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ **—Ä–æ—É—Ç**, –∞ –∑–∞—Ç–µ–º –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ **—à–∞–±–ª–æ–Ω**.
#### 2. –†–æ—É—Ç –≤—ã–∑—ã–≤–∞–µ—Ç —Å–µ—Ä–≤–∏—Å –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç –¥–∞–Ω–Ω—ã–µ –≤ —à–∞–±–ª–æ–Ω
üìÑ `app/routes/default_routes.py`
```python
# app/routes/default_routes.py
@bp.route('/default')
@login_required
def default():
    cards = get_defaults_cards()
    return render_template(
        'pages/default.html',
        center_cards=center_cards,
        grid_cards=grid_cards,
        columns=3
    )
```
- –í—ã–∑—ã–≤–∞–µ—Ç —Å–µ—Ä–≤–∏—Å `get_defaults_cards()`.
- –†–µ–Ω–¥–µ—Ä–∏—Ç HTML-—à–∞–±–ª–æ–Ω `default.html` –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç –≤ –Ω–µ–≥–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.
#### 3. –®–∞–±–ª–æ–Ω default.html –ø–æ–¥–∫–ª—é—á–∞–µ—Ç –º–∞–∫—Ä–æ—Å
üìÑ `app/templates/pages/default.html`'
```
{# app/templates/pages/default.html #}
{% import 'base/macros/renders/default_render.html' as render %}
...
<div class="cards">
    {% for card in grid_cards %}
        {{ render.render_card(card) }}
    {% endfor %}
</div>
```
##### –ú–∞–∫—Ä–æ—Å render_card –≤—ã–∑—ã–≤–∞–µ—Ç –Ω—É–∂–Ω—É—é HTML-–≤—Å—Ç–∞–≤–∫—É
–ú–∞–∫—Ä–æ—Å `render_card()` –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –æ—Ç—Ä–∏—Å–æ–≤–∫—É –±–æ–ª–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–æ–º—É –º–∞–∫—Ä–æ—Å—É `render_default_card`.
```jinja2
{# app/templates/base/macros/renders/default_render.html #}
{% macro render_card(card) %}
    {% if card.type == 'text_info' %}
        {% include 'base/macros/cards/default/default_card.html' %}
    {% endif %}
{% endmacro %}
```
- –í—ã–±–∏—Ä–∞–µ—Ç —à–∞–±–ª–æ–Ω –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç `card.type`.
- –í—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ HTML —á–µ—Ä–µ–∑ `include`.
###### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç /macros/default_render.html
üìÑ `/app/templates/base/macros/renders/default_render.html`
```jinja2
{# default_render.html #}
{% import 'base/macros/cards/default/default_card.html' as render %}

{% macro render_card(card) %}
    {{ render.render_default_card(card) }}
{% endmacro %}
```
**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**
- **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –º–∞–∫—Ä–æ—Å** `render_default_card()` –∏–∑ –¥—Ä—É–≥–æ–≥–æ —Ñ–∞–π–ª–∞ (`default_card.html`).
- **–°–æ–∑–¥–∞—ë—Ç –æ–±—ë—Ä—Ç–æ—á–Ω—ã–π –º–∞–∫—Ä–æ—Å** `render_card(card)`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç `default_cards.render_default_card(card)`.

üëâ –¢–æ–≥–¥–∞:
1. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `render_card(card)` –∏–∑ `default_render.html`.
2. –≠—Ç–æ—Ç –º–∞–∫—Ä–æ—Å –≤—ã–∑—ã–≤–∞–µ—Ç `render_default_card(card)` –∏–∑ `default_card.html`.
3. –ö–∞—Ä—Ç–æ—á–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∫–∞–∫ HTML.

**–î–ª—è —á–µ–≥–æ —ç—Ç–æ?**  
–ß—Ç–æ–±—ã –∏–∑ —à–∞–±–ª–æ–Ω–∞ —Ç—ã –≤—ã–∑—ã–≤–∞–ª –≤—Å–µ–≥–¥–∞ —Ç–æ–ª—å–∫–æ `render.render_card(card)` ‚Äî –∏ –≤–Ω—É—Ç—Ä–∏ —É–∂–µ –ø–æ–¥—Å—Ç–∞–≤–ª—è–ª–∞—Å—å –Ω—É–∂–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–∑–∂–µ –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∏–µ —Ç–∏–ø—ã –∫–∞—Ä—Ç–æ—á–µ–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä:
```jinja2
{% if card.type == 'info' %}
  {{ default_cards.render_default_card(card) }}
{% elif card.type == 'chart' %}
  {{ chart_cards.render_chart_card(card) }}
{% endif %}
```
###### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç /macros/default_card.html
üìÑ `/app/templates/base/macros/cards/default_card.html`
```jinja2
{# default_card.html #}
{% macro render_default_card(card) %}
<div class="{{ card.wrapper_class }}">
    <div class="card {{ card.card_class | default('') }}">
        <div class="card-body">
            <h5 class="card-title">
                <i class="fas fa-{{ card.icon | default('question-circle') }} me-2"></i>
                {{ card.title }}
            </h5>
            <p class="card-text">{{ card.content | safe }}</p>
        </div>
    </div>
</div>
{% endmacro %}

```
**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**
- –ú–∞–∫—Ä–æ—Å **—Ä–µ–Ω–¥–µ—Ä–∏—Ç HTML-–∫–∞—Ä—Ç–æ—á–∫—É**, –∏—Å–ø–æ–ª—å–∑—É—è –ø–æ–ª—è –∏–∑ –æ–±—ä–µ–∫—Ç–∞ `card`.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `| default(...)`, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –æ—à–∏–±–æ–∫, –µ—Å–ª–∏ –ø–æ–ª–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.
- `| safe` ‚Äî —Ä–∞–∑—Ä–µ—à–∞–µ—Ç HTML-—Ç–µ–≥–∏ –≤ `card.content`, –Ω–∞–ø—Ä–∏–º–µ—Ä –¥–ª—è `<br>`, `<b>`, —Å—Å—ã–ª–æ–∫ –∏ —Ç.–¥.
#### 4. –í—Å—Ç–∞–≤–∫–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–∞–∫ HTML
üìÑ `app/services/default_cards_service.py`
```jinja2
{# app/templates/base/macros/cards/default/default_card.html #}
<div class="{{ card.card_class }}">
    <div class="{{ card.wrapper_class }}">
        <h3>{{ card.title }}</h3>
        <p>{{ card.content }}</p>
    </div>
</div>
```
- –≠—Ç–æ —É–∂–µ –∫–æ–Ω–µ—á–Ω—ã–π HTML –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–ª–æ–≤–∞—Ä—è `card`
### 6. –ú–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
üìÑ `app/models/users.py`  
–•—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
- –ø—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- —á–µ—Ä–µ–∑ `load_user` –∏–∑ Flask-Login:

```python
@login_manager.user_loader
def load_user(user_id):
    return User.query.get(int(user_id))
```
### 7. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
üìÑ `config/settings.py` ‚Üí —É–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–æ–π –∫–æ–Ω—Ñ–∏–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å (`dev`, `prod`).  
üìÑ `config/base_config.py`  
–ü–æ–¥–∫–ª—é—á–∞–µ—Ç `.env`, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç:
- `SECRET_KEY`
- –ø—É—Ç—å –∫ –ë–î
- –¥–∞–Ω–Ω—ã–µ VPS
- –ø—É—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ –∏ API-—Ç–æ–∫–µ–Ω